<!doctype html public "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<html>
<head>
<title>
 Overview
</title>
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script>
function asd() {
	
		parent.document.title="Canvas.js Overview";
	
}
</script>
</head>
<body bgcolor="white" onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> 	<font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top">
<em>
<b></b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<center>
	
	   <h2>Canvas.js</h2>
	
</center>

	


<h4>Summary</h4>
<p>
	
		No overview generated for 'Canvas.js'<BR/><BR/>
	
</p>

<hr>


    <table border="1" cellpadding="3" cellspacing="0" width="100%">
    <tr bgcolor="#CCCCFF" class="TableHeadingColor">
    <td colspan=2><font size="+2">
    
        <b>Class Summary</b>
    
    </font></td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="Curly/Canvas.html">Curly.Canvas</a></b></td>
    <td>&nbsp;</td>
    </tr>
    
    </table>
    <hr/> 


<!-- ========== METHOD SUMMARY =========== -->

<!-- ========== END METHOD SUMMARY =========== -->


        <pre class="sourceview"><span class="comment">/**
 * <span class="attrib">@class</span> Curly.Canvas
 */</span>
<span class="comment">/**
 * <span class="attrib">@constructor</span>
 * <span class="attrib">@param</span> HtmlElement|CanvasRenderingContext2D
 * 
 * Provides methods to work with a canvas 2d rendering context
 * <span class="attrib">@link</span> http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#canvasrenderingcontext2d
 */</span>
Curly.Canvas=<span class="reserved">function</span>(source) {
	Curly.Canvas.superclass.constructor.call(<span class="reserved">this</span>);
	
	var self=<span class="reserved">this</span>;
	var ctx=null;
	var stateStack=[];
	
	<span class="comment">/**
	 * Returns the rendering context.
	 * 
	 * <span class="attrib">@return</span> CanvasRenderingContext2D
	 * <span class="attrib">@internal</span>
	 */</span>
	<span class="reserved">this</span>.getCtx=<span class="reserved">function</span>() {
		<span class="reserved">return</span> ctx;
	};
	
	<span class="reserved">if</span>(typeof source==<span class="literal">'string'</span>) {
		source=document.getElementById(source);
		<span class="reserved">if</span>(!source) {
			throw new Curly.Canvas.Error(<span class="literal">'The given argument is no valid element id'</span>);
		}
	}
	
	<span class="reserved">if</span>(source instanceof CanvasRenderingContext2D) {
		ctx=source;
	}
	<span class="reserved">else</span> <span class="reserved">if</span>(source instanceof Element &amp;&amp; source.tagName.toLowerCase()==<span class="literal">'canvas'</span>) {
		<span class="comment">// Support for excanvas</span>
		<span class="reserved">if</span>(window.G_vmlCanvasManager) {
			G_vmlCanvasManager.initElement(source);
		}
		
		ctx=source.getContext(<span class="literal">'2d'</span>);
	}
	<span class="reserved">else</span> {
		throw new Curly.Canvas.Error(<span class="literal">'The given argument is no valid parameter'</span>);
	}
	
	<span class="comment">/**
	 * <span class="attrib">@var</span> float Correcting for the x coordinate. Is applied to every canvas state.
	 * This Correction is required for lines with a line thickness of one pixel so the
	 * drawing operation is not blured by the antialiasing.
	 */</span>
	<span class="reserved">this</span>.xCorrection=0.5;
	
	<span class="comment">/**
	 * <span class="attrib">@var</span> float Correcting for the y coordinate.
	 */</span>
	<span class="reserved">this</span>.yCorrection=0.5;
	
	<span class="comment">/**
	 * <span class="attrib">@var</span> boolean Flag if the coordinate correction should be applied.
	 */</span>
	<span class="reserved">this</span>.useCorrection=true;
	
	<span class="comment">/**
	 * <span class="attrib">@var</span> boolean Flag if the coordinate correction should only use integer values.
	 */</span>
	<span class="reserved">this</span>.useIntCorrection=false;
	
	<span class="comment">/**
	 * Returns the drawing style to the given object.
	 * 
	 * <span class="attrib">@return</span> Object
	 * <span class="attrib">@param</span> Object
	 */</span>
	var determineStyle=<span class="reserved">function</span>(o) {
		<span class="reserved">if</span>(o instanceof Curly.Gradient) {
			<span class="reserved">return</span> o.createGradient(ctx, <span class="reserved">this</span>);
		}
		<span class="reserved">else</span> {
			<span class="reserved">return</span> o;
		}
	};
	
	<span class="comment">/**
	 * Applies the current state to the canvas.
	 * 
	 * <span class="attrib">@private</span>
	 */</span>
	var setState=<span class="reserved">function</span>() {
		var s;
		<span class="reserved">if</span>(stateStack.length&lt;=0) {
			s=Curly.Canvas.State.DEFAULTS;
			stateStack.push(s);
		}
		<span class="reserved">else</span> {
			s=stateStack[stateStack.length-1];
		}
		
		<span class="comment">// Apply or reset transformation</span>
		var t=s.transform;
		<span class="reserved">if</span>(!(t instanceof Array) || t.length&lt;6) {
			t=Curly.Canvas.State.IDENTITY_MATRIX;
		}
		ctx.setTransform(t[0], t[1], t[2], t[3], t[4], t[5]);
		
		ctx.scale(s.scaleX, s.scaleY);
		ctx.rotate(s.rotate);
		
		var tx=s.translateX, ty=s.translateY;
		<span class="reserved">if</span>(self.useCorrection) {
			<span class="reserved">if</span>(self.useIntCorrection) {
				tx+=parseInt(self.xCorrection);
				ty+=parseInt(self.yCorrection);
			}
			<span class="reserved">else</span> {
				tx+=self.xCorrection;
				ty+=self.yCorrection;
			}
		}
		
		ctx.translate(tx, ty);
		
		ctx.globalAlpha=s.alpha;
		ctx.globalCompositeOperation=s.compositeOperation;
		ctx.lineWidth=s.lineWidth;
		ctx.lineCap=s.lineCap;
		ctx.lineJoin=s.lineJoin;
		ctx.miterLimit=s.miterLimit;
		ctx.shadowOffsetX=s.shadowOffsetX;
		ctx.shadowOffsetY=s.shadowOffsetY;
		ctx.shadowBlur=s.shadowBlur;
		ctx.shadowColor=s.shadowColor;
		ctx.strokeStyle=determineStyle(s.strokeStyle);
		ctx.fillStyle=determineStyle(s.fillStyle);
		ctx.font=s.font;
		ctx.textAlign=s.textAlign;
		ctx.textBaseline=s.textBaseline;
	};
	
	<span class="comment">/**
	 * Returns the HtmlElement object to the canvas
	 * 
	 * <span class="attrib">@return</span> HtmlElement
	 */</span>
	<span class="reserved">this</span>.getElement=<span class="reserved">function</span>() {
		<span class="reserved">return</span> ctx.canvas;
	};
	
	<span class="comment">/**
	 * Returns the width of the canvas.
	 * 
	 * <span class="attrib">@return</span> integer
	 */</span>
	<span class="reserved">this</span>.getWidth=<span class="reserved">function</span>() {
		<span class="reserved">return</span> ctx.canvas.width;
	};
	
	<span class="comment">/**
	 * Sets the width of the canvas.
	 * 
	 * <span class="attrib">@return</span> Curly.Canvas
	 * <span class="attrib">@param</span> integer
	 */</span>
	<span class="reserved">this</span>.setWidth=<span class="reserved">function</span>(v) {
		<span class="reserved">return</span> <span class="reserved">this</span>.setDimensions([v, <span class="reserved">this</span>.getHeight()]);
	};
	
	<span class="comment">/**
	 * Returns the height of the canvas.
	 * 
	 * <span class="attrib">@return</span> integer
	 */</span>
	<span class="reserved">this</span>.getHeight=<span class="reserved">function</span>() {
		<span class="reserved">return</span> ctx.canvas.height;
	};
	
	<span class="comment">/**
	 * Sets the height of the canvas.
	 * 
	 * <span class="attrib">@return</span> Curly.Canvas
	 * <span class="attrib">@param</span> integer
	 */</span>
	<span class="reserved">this</span>.setHeight=<span class="reserved">function</span>(v) {
		<span class="reserved">return</span> <span class="reserved">this</span>.setDimensions([<span class="reserved">this</span>.getWidth(), v]);
	};
	
	<span class="comment">/**
	 * Returns the dimensions of the canvas as an array.
	 * 
	 * <span class="attrib">@return</span> Array
	 */</span>
	<span class="reserved">this</span>.getDimensions=<span class="reserved">function</span>() {
		<span class="reserved">return</span> [<span class="reserved">this</span>.getWidth(), <span class="reserved">this</span>.getHeight()];
	};
	
	<span class="comment">/**
	 * Sets the dimensions of the canvas with an array as value.
	 * 
	 * <span class="attrib">@return</span> Curly.Canvas
	 * <span class="attrib">@param</span> Array
	 */</span>
	<span class="reserved">this</span>.setDimensions=<span class="reserved">function</span>(dim) {
		var w=dim[0], h=dim[1];
		
		<span class="comment">// Store current image data, if available</span>
		var data=null;
		<span class="reserved">if</span>(ctx.getImageData) {
			data=ctx.getImageData(
				0, 0,
				Math.min(<span class="reserved">this</span>.getWidth(), w),
				Math.min(<span class="reserved">this</span>.getHeight(), h)
			);
		}

		<span class="comment">// Resize the canvas</span>
		ctx.canvas.width=w;
		ctx.canvas.height=h;
		
		<span class="comment">// Restore stored image data, if available</span>
		<span class="reserved">if</span>(data) {
			ctx.putImageData(data, 0, 0);
		}
		
		<span class="reserved">return</span> <span class="reserved">this</span>;
	};
	
	<span class="comment">/**
	 * Returns the current state.
	 * 
	 * <span class="attrib">@return</span> Curly.Canvas.State or undefined
	 */</span>
	<span class="reserved">this</span>.getState=<span class="reserved">function</span>() {
		<span class="reserved">if</span>(stateStack.length&lt;=0) {
			<span class="reserved">return</span> undefined;
		}
		<span class="reserved">else</span> {
			<span class="reserved">return</span> stateStack[stateStack.length-1];
		}
	};
	
	<span class="comment">/**
	 * Adds the given state to the state stack.
	 * 
	 * <span class="attrib">@return</span> Curly.Canvas
	 * <span class="attrib">@param</span> Curly.Canvas.State
	 */</span>
	<span class="reserved">this</span>.pushState=<span class="reserved">function</span>(state) {
		stateStack.push(state);
		<span class="reserved">return</span> <span class="reserved">this</span>;
	};
	
	<span class="comment">/**
	 * Removes the current state from the state stack.
	 * 
	 * <span class="attrib">@return</span> Curly.Canvas.State or undefined if the stack is empty.
	 * <span class="attrib">@param</span> Integer Number of states to remove
	 */</span>
	<span class="reserved">this</span>.popState=<span class="reserved">function</span>(n) {
		var state;
		<span class="reserved">for</span>(var i=0, n=n||1; i&lt;n; i++) {
			state=stateStack.pop();
		}
		<span class="reserved">return</span> state;
	};
	
	<span class="comment">/**
	 * Adds a default state to the state stack.
	 * 
	 * <span class="attrib">@return</span> Curly.Canvas
	 * <span class="attrib">@param</span> Curly.Canvas.State
	 */</span>
	<span class="reserved">this</span>.pushDefaultState=<span class="reserved">function</span>() {
		<span class="reserved">return</span> <span class="reserved">this</span>.pushState(new Curly.Canvas.State());
	};
	
	<span class="comment">/**
	 * Applies the topmost state of the state stack to the canvas.
	 * 
	 * <span class="attrib">@return</span> Curly.Canvas
	 */</span>
	<span class="reserved">this</span>.applyState=<span class="reserved">function</span>() {
		setState();
		<span class="reserved">return</span> <span class="reserved">this</span>;
	};
	
	<span class="comment">/**
	 * Duplicates the current state and applies the given changes to it. After
	 * that the resulting state is added to the state stack.
	 * 
	 * <span class="attrib">@return</span> Curly.Canvas
	 * <span class="attrib">@param</span> Object|String
	 * <span class="attrib">@param</span> String
	 */</span>
	<span class="reserved">this</span>.overwriteState=<span class="reserved">function</span>(changes) {
		<span class="reserved">if</span>(typeof changes==<span class="literal">'string'</span>) {
			var tmp={};
			tmp[changes]=arguments[1];
			changes=tmp;
		}
		
		var state={};
		var currentState=<span class="reserved">this</span>.getState();
		<span class="reserved">if</span>(currentState!=undefined) {
			Curly.extend(state, currentState);
		}
		
		<span class="reserved">this</span>.pushState(new Curly.Canvas.State(Curly.extend(state, changes)));
		<span class="reserved">return</span> <span class="reserved">this</span>;
	};
	
	<span class="comment">/**
	 * Returns the image data of this canvas as an ImageData object.
	 * 
	 * <span class="attrib">@return</span> ImageData
	 * <span class="attrib">@param</span> integer X coordinate for the image clip. Defaults to 0
	 * <span class="attrib">@param</span> integer Y coordinate for the image clip. Defaults to 0
	 * <span class="attrib">@param</span> integer Width of the image clip. Defaults to the full width
	 * <span class="attrib">@param</span> integer Height of the image clip. Defaults to the full height
	 */</span>
	<span class="reserved">this</span>.getImageData=<span class="reserved">function</span>(x, y, w, h) {
		<span class="reserved">if</span>(x===undefined) {
			x=0;
		}
		<span class="reserved">if</span>(y===undefined) {
			y=0;
		}
		<span class="reserved">if</span>(w===undefined) {
			w=<span class="reserved">this</span>.getWidth();
		}
		<span class="reserved">if</span>(h===undefined) {
			h=<span class="reserved">this</span>.getHeight();
		}
		
		<span class="reserved">return</span> ctx.getImageData(x, y, w, h);
	};
	
	<span class="comment">/**
	 * Draws the given element into the canvas element.
	 * 
	 * <span class="attrib">@return</span> void
	 * <span class="attrib">@param</span> HtmlImageElement|HtmlCanvasElement|HtmlVideoElement
	 * <span class="attrib">@param</span> integer Source width
	 * <span class="attrib">@param</span> integer Source height
	 * <span class="attrib">@param</span> integer Source x coordinate
	 * <span class="attrib">@param</span> integer Source y coordinate
	 * <span class="attrib">@param</span> integer Target x coordinate
	 * <span class="attrib">@param</span> integer Target y coordinate
	 * <span class="attrib">@param</span> integer Target width
	 * <span class="attrib">@param</span> integer Target height
	 * <span class="attrib">@internal</span>
	 */</span>
	var drawImage=<span class="reserved">function</span>(el, srcX, srcY, srcW, srcH, dstX, dstY, dstW, dstH) {
		var tmp=<span class="reserved">this</span>.useIntCorrection;
		<span class="reserved">this</span>.useIntCorrection=true;
		<span class="reserved">this</span>.applyState();
		
		ctx.drawImage(el, srcX, srcY, srcW, srcH, dstX, dstY, dstW, dstH);
		
		<span class="reserved">this</span>.useIntCorrection=tmp;
		<span class="reserved">this</span>.applyState();
	};
	
	<span class="comment">/**
	 * Copies the given image data into this canvas.
	 * 
	 * <span class="attrib">@throws</span> Curly.Canvas.Error
	 * <span class="attrib">@return</span> Curly.Canvas
	 * <span class="attrib">@param</span> ImageData|Curly.Canvas|CanvasRenderingContext2D
	 * <span class="attrib">@param</span> integer Target x coordinate. Defaults to 0
	 * <span class="attrib">@param</span> integer Target y coordinate. Defaults to 0
	 * <span class="attrib">@param</span> integer Source x coordinate. Defaults to 0
	 * <span class="attrib">@param</span> integer Source y coordinate. Defaults to 0
	 * <span class="attrib">@param</span> integer Source width. Defaults to the width of the element
	 * <span class="attrib">@param</span> integer Source height. Defaults to the height of the element
	 */</span>
	<span class="reserved">this</span>.copy=<span class="reserved">function</span>(data, dstX, dstY, srcX, srcY, srcW, srcH) {
		<span class="comment">// set defaults</span>
		<span class="reserved">if</span>(srcX===undefined) {
			srcX=0;
		}
		<span class="reserved">if</span>(srcY===undefined) {
			srcY=0;
		}
		<span class="reserved">if</span>(dstX===undefined) {
			dstX=0;
		}
		<span class="reserved">if</span>(dstY===undefined) {
			dstY=0;
		}
		
		<span class="comment">// Canvas or RenderingContext</span>
		var isCanvas=(data instanceof Curly.Canvas);
		var isContext=(data instanceof CanvasRenderingContext2D);
		<span class="reserved">if</span>(isCanvas || isContext || data instanceof Element) {
			var elW, elH;
			<span class="reserved">if</span>(isCanvas) {
				el=data.getElement();
			}
			<span class="reserved">else</span> <span class="reserved">if</span>(isContext) {
				el=data.canvas;
			}
			<span class="reserved">else</span> {
				el=data;
				elW=el.offsetWidth;
				elH=el.offsetHeight;
			}
			
			<span class="reserved">if</span>(srcW===undefined) {
				srcW=elW ? elW : el.width;
			}
			<span class="reserved">if</span>(srcH===undefined) {
				srcH=elH ? elH : el.height;
			}
			
			drawImage(
				el,
				srcX, srcY, srcW, srcH,
				dstX, dstY, srcW, srcH
			);
		}
		<span class="comment">// ImageData: Validate maximal width</span>
		<span class="reserved">else</span> {
			<span class="reserved">if</span>(data.width&gt;<span class="reserved">this</span>.getWidth()+dstX) {
				throw new Curly.Canvas.Error(<span class="literal">'The width attribute of the given ImageData is too big'</span>);
			}
			<span class="reserved">else</span> <span class="reserved">if</span>(data.height&gt;<span class="reserved">this</span>.getHeight()+dstY) {
				throw new Curly.Canvas.Error(<span class="literal">'The width attribute of the given ImageData is too big'</span>);
			}
			
			ctx.putImageData(data, dstX, dstY);
		}
		
		<span class="reserved">return</span> <span class="reserved">this</span>;
	};
	
	<span class="comment">/**
	 * Copies the given image data scaled into this canvas.
	 * 
	 * <span class="attrib">@throws</span> Curly.Canvas.Error
	 * <span class="attrib">@return</span> Curly.Canvas
	 * <span class="attrib">@param</span> Curly.Canvas|CanvasRenderingContext2D
	 * <span class="attrib">@param</span> integer Target x coordinate. Defaults to 0
	 * <span class="attrib">@param</span> integer Target y coordinate. Defaults to 0
	 * <span class="attrib">@param</span> integer Source x coordinate. Defaults to 0
	 * <span class="attrib">@param</span> integer Source y coordinate. Defaults to 0
	 * <span class="attrib">@param</span> integer Target width. Defaults to the full width
	 * <span class="attrib">@param</span> integer Target height. Defaults to the full height
	 * <span class="attrib">@param</span> integer Source width. Defaults to the width of the element
	 * <span class="attrib">@param</span> integer Source height. Defaults to the height of the element
	 */</span>
	<span class="reserved">this</span>.copyResized=<span class="reserved">function</span>(data, dstX, dstY, srcX, srcY, dstW, dstH, srcW, srcH) {
		<span class="comment">// set defaults</span>
		<span class="reserved">if</span>(srcX===undefined) {
			srcX=0;
		}
		<span class="reserved">if</span>(srcY===undefined) {
			srcY=0;
		}
		<span class="reserved">if</span>(dstX===undefined) {
			dstX=0;
		}
		<span class="reserved">if</span>(dstY===undefined) {
			dstY=0;
		}
		<span class="reserved">if</span>(dstW===undefined) {
			dstW=<span class="reserved">this</span>.getWidth();
		}
		<span class="reserved">if</span>(dstH===undefined) {
			dstH=<span class="reserved">this</span>.getHeight();
		}
		
		<span class="reserved">if</span>(data instanceof Curly.Canvas) {
			el=data.getElement();
		}
		<span class="reserved">else</span> {
			el=data.canvas;
		}
		
		<span class="reserved">if</span>(srcW===undefined) {
			srcW=el.width;
		}
		<span class="reserved">if</span>(srcH===undefined) {
			srcH=el.height;
		}
		
		drawImage(
			el,
			srcX, srcY, srcW, srcH,
			dstX, dstY, dstW, dstH
		);
		
		<span class="reserved">return</span> <span class="reserved">this</span>;
	};
	
	<span class="comment">/**
	 * Removes any drawn data from this canvas.
	 * 
	 * <span class="attrib">@return</span> Curly.Canvas
	 */</span>
	<span class="reserved">this</span>.clear=<span class="reserved">function</span>() {
		var tmp=<span class="reserved">this</span>.useCorrection;
		<span class="reserved">this</span>.useCorrection=false;
		
		setState();
		ctx.clearRect(0, 0, <span class="reserved">this</span>.getWidth(), <span class="reserved">this</span>.getHeight());
		<span class="reserved">this</span>.useCorrection=tmp;
		
		<span class="reserved">return</span> <span class="reserved">this</span>;
	};
	
	<span class="comment">/**
	 * Creates a new Path object. It's referenced with this canvas object.
	 * 
	 * <span class="attrib">@return</span> Curly.Path
	 * <span class="attrib">@param</span> integer X coordinate for the start point of the path
	 * <span class="attrib">@param</span> integer Y coordinate for the start point of the path
	 */</span>
	<span class="reserved">this</span>.path=<span class="reserved">function</span>(x, y) {
		var p=new Curly.Path(x, y);
		p.canvas=<span class="reserved">this</span>;
		<span class="reserved">return</span> p;
	};
	
	<span class="comment">/**
	 * Creates a new StatefulPath object. It's referenced with this canvas object.
	 * 
	 * <span class="attrib">@return</span> Curly.StatefulPath
	 * <span class="attrib">@param</span> integer X coordinate for the start point of the path
	 * <span class="attrib">@param</span> integer Y coordinate for the start point of the path
	 */</span>
	<span class="reserved">this</span>.statefulPath=<span class="reserved">function</span>(x, y) {
		var p=new Curly.StatefulPath(x, y);
		p.canvas=<span class="reserved">this</span>;
		<span class="reserved">return</span> p;
	};
	
	<span class="comment">/**
	 * Draws the given Drawable object to this canvas.
	 * 
	 * <span class="attrib">@throws</span> Curly.Canvas.Error
	 * <span class="attrib">@return</span> Curly.Canvas
	 * <span class="attrib">@param</span> Curly.Drawable
	 */</span>
	<span class="reserved">this</span>.draw=<span class="reserved">function</span>(drawable) {
		<span class="reserved">if</span>(!(drawable instanceof Curly.Drawable)) {
			throw new Curly.Canvas.Error(<span class="literal">'The given object is no drawable object'</span>);
		}
		
		setState();
		drawable.draw(ctx, <span class="reserved">this</span>);
		
		<span class="reserved">return</span> <span class="reserved">this</span>;
	};
	
	<span class="comment">/**
	 * Sets the clipping region to the given Shape instance.
	 * 
	 * <span class="attrib">@throws</span> Curly.Canvas.Error
	 * <span class="attrib">@return</span> Curly.Canvas
	 * <span class="attrib">@param</span> Curly.Shape
	 */</span>
	<span class="reserved">this</span>.clip=<span class="reserved">function</span>(shape) {
		<span class="reserved">if</span>(!(shape instanceof Curly.Shape)) {
			throw new Curly.Canvas.Error(<span class="literal">'The given object is no shape object'</span>);
		}
		
		<span class="comment">// Restore old state to remove any actually active clipping region</span>
		ctx.restore();
		ctx.save();
		
		var tmp=<span class="reserved">this</span>.useCorrection;
		<span class="reserved">this</span>.useCorrection=false;
		setState();
		
		<span class="comment">// Draw the shape</span>
		<span class="reserved">if</span>(!(shape instanceof Curly.Path)) {
			shape=shape.getPath(<span class="reserved">this</span>);
		}
		
		shape.draw(false, false);	<span class="comment">// false to just apply the path and don't render anything</span>
		ctx.clip();
		
		<span class="reserved">this</span>.useCorrection=tmp;
		setState();
		
		<span class="reserved">return</span> <span class="reserved">this</span>;
	};
	
	<span class="comment">/**
	 * Expands the current clipping region to the whole canvas instance.
	 * 
	 * <span class="attrib">@throws</span> Curly.Canvas.Error
	 * <span class="attrib">@return</span> Curly.Canvas
	 */</span>
	<span class="reserved">this</span>.unclip=<span class="reserved">function</span>() {
		<span class="reserved">return</span> <span class="reserved">this</span>.clip(new Curly.Rectangle(0, 0, <span class="reserved">this</span>.getWidth(), <span class="reserved">this</span>.getHeight()));
	};
	
	<span class="reserved">this</span>.pushDefaultState();
};

Curly.extendClass(Curly.Canvas, Object);
</pre>
	<hr>



<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> <font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top"><em>
<b></b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<font size="-1">

</font>
<div class="jsdoc_ctime">Documentation generated by <a href="http://jsdoc.sourceforge.net/" target="_parent">JSDoc</a> on Wed Jan 13 09:38:55 2010</div>
</body>
</html>
